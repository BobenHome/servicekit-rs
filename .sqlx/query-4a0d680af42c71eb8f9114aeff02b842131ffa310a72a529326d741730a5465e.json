{
  "db_name": "MySQL",
  "query": "-- name: refresh_mc_user_ztk\n-- 刷新 mc_user_ztk\nINSERT INTO mc_user_ztk(ID,\n                        NAME,\n                        NO,\n                        ACCOUNT_TYPE,\n                        CERTIFICATE_CODE,\n                        D_DELETE,\n                        DATELASTMODIFIED,\n                        EFFECTIVE_TIME_END,\n                        EFFECTIVE_TIME_START,\n                        GENDER,\n                        IS_DELETE,\n                        IS_EHR_SYNC,\n                        LOGINNAME,\n                        ORG,\n                        PASSWORD_RESET,\n                        PHOTO,\n                        USER_GROUP_IDS,\n                        WEIGHT,\n                        ENCRYPTCERTIFICATE_CODE,\n                        EXT_JOB_INFO_JOBSTATUS,\n                        EXT_JOB_INFO_JOBCATEGORY,\n                        EXT_JOB_INFO_HRJOBTYPE,\n                        EXT_JOB_INFO_JOBTYPE,\n                        BASE_STATION_SEQUENCE,\n                        BASE_STATION_CODE,\n                        BASE_STATION_SYSTEM,\n                        BASE_STATION_GRADESYSTEM,\n                        BASE_STATION_LEVEL,\n                        BASE_STATION_GRADE,\n                        BASE_STATION_NAME,\n                        NAME_CARD_COMPANY_ID,\n                        NAME_CARD_GENDER,\n                        NAME_CARD_COMPANYPHONE,\n                        NAME_CARD_ORGANIZATION,\n                        NAME_CARD_NAME,\n                        NAME_CARD_STATION,\n                        NAME_CARD_MOBILE,\n                        NAME_CARD_FOLK,\n                        NAME_CARD_COMPANY,\n                        NAME_CARD_EMAIL,\n                        CONTACT_INFO_PHONE,\n                        CONTACT_INFO_MOBILE,\n                        CONTACT_INFO_EMAIL,\n                        JOB_INFO_POSITIVE_DATE,\n                        JOB_INFO_SPECIAL_JOB_YEARS,\n                        JOB_INFO_WORK_DATE,\n                        JOB_INFO_IS_SPECIAL_JOB,\n                        JOB_INFO_LEAVE_DATE,\n                        JOB_INFO_WORK_AGE,\n                        JOB_INFO_IS_CORE_STAFF,\n                        JOB_INFO_ENTERUNIT_DATE,\n                        MSS_ACCOUNT,\n                        MSS_BASESTATION,\n                        MSS_BIRTHDAY,\n                        MSS_CODE,\n                        MSS_COMPANYCODE,\n                        MSS_EMAIL,\n                        MSS_ENGLISHNAME,\n                        MSS_FIRSTMOBILE,\n                        MSS_HRCODE,\n                        MSS_HRID,\n                        MSS_HRJOBTYPE,\n                        MSS_ID,\n                        MSS_IDENTITY,\n                        MSS_IDENTITYCARD,\n                        MSS_JOBCATEGORY,\n                        MSS_JOBNUMBER,\n                        MSS_JOBSTATUS,\n                        MSS_JOBTYPE,\n                        MSS_MAPID,\n                        MSS_NAME,\n                        MSS_ORGANIZATIONCODE,\n                        MSS_SEX,\n                        MSS_SORT,\n                        MSS_STANDBYACCOUNT,\n                        MSS_STATION,\n                        MSS_STATIONGRADE,\n                        MSS_STATIONGRADESYSTEM,\n                        MSS_STATIONLEVEL,\n                        MSS_STATIONSEQUENCE,\n                        MSS_STATIONSYSTEM,\n                        MSS_TELEPHONE,\n                        MSS_TIME,\n                        MSS_USERSTATUS,\n                        SHOW_TELEPHONE,\n                        SHOW_IDENTITY_CARD,\n                        IDENTITY_CARD_JM,\n                        BIRTH_YEAR,\n                        BIRTH_MONTH,\n                        BIRTH_DAY,\n                        AGE,\n                        DS_AREACODE,\n                        AMOUNT,\n                        TAG_IDS,\n                        TAG_NAMES,\n                        CERTIFICATE_TYPE,\n                        MODIFYTIME)\nSELECT TU.ID,\n       TU.NAME,\n       TU.NO,\n       TU.ACCOUNT_TYPE,\n       TU.CERTIFICATE_CODE,\n       TU.D_DELETE,\n       TU.DATELASTMODIFIED,\n       TU.EFFECTIVE_TIME_END,\n       TU.EFFECTIVE_TIME_START,\n       TU.GENDER,\n       TU.IS_DELETE,\n       TU.IS_EHR_SYNC,\n       TU.LOGINNAME,\n       TU.ORG,\n       TU.PASSWORD_RESET,\n       TU.PHOTO,\n       TU.USER_GROUP_IDS,\n       TU.WEIGHT,\n       TU.ENCRYPTCERTIFICATE_CODE,\n       TU.EXT_JOB_INFO_JOBSTATUS,\n       TU.EXT_JOB_INFO_JOBCATEGORY,\n       TU.EXT_JOB_INFO_HRJOBTYPE,\n       TU.EXT_JOB_INFO_JOBTYPE,\n       TU.BASE_STATION_SEQUENCE,\n       TU.BASE_STATION_CODE,\n       TU.BASE_STATION_SYSTEM,\n       TU.BASE_STATION_GRADESYSTEM,\n       TU.BASE_STATION_LEVEL,\n       TU.BASE_STATION_GRADE,\n       TU.BASE_STATION_NAME,\n       TU.NAME_CARD_COMPANY_ID,\n       TU.NAME_CARD_GENDER,\n       TU.NAME_CARD_COMPANYPHONE,\n       TU.NAME_CARD_ORGANIZATION,\n       TU.NAME_CARD_NAME,\n       TU.NAME_CARD_STATION,\n       TU.NAME_CARD_MOBILE,\n       TU.NAME_CARD_FOLK,\n       TU.NAME_CARD_COMPANY,\n       TU.NAME_CARD_EMAIL,\n       TU.CONTACT_INFO_PHONE,\n       TU.CONTACT_INFO_MOBILE,\n       TU.CONTACT_INFO_EMAIL,\n       TU.JOB_INFO_POSITIVE_DATE,\n       TU.JOB_INFO_SPECIAL_JOB_YEARS,\n       TU.JOB_INFO_WORK_DATE,\n       TU.JOB_INFO_IS_SPECIAL_JOB,\n       TU.JOB_INFO_LEAVE_DATE,\n       TU.JOB_INFO_WORK_AGE,\n       TU.JOB_INFO_IS_CORE_STAFF,\n       TU.JOB_INFO_ENTERUNIT_DATE,\n       MU.ACCOUNT,\n       MU.BASESTATION,\n       MU.BIRTHDAY,\n       MU.CODE,\n       MU.COMPANYCODE,\n       MU.EMAIL,\n       MU.ENGLISHNAME,\n       MU.FIRSTMOBILE,\n       MU.HRCODE,\n       MU.HRID,\n       MU.HRJOBTYPE,\n       MU.ID,\n       MU.IDENTITY,\n       MU.IDENTITYCARD,\n       MU.JOBCATEGORY,\n       MU.JOBNUMBER,\n       MU.JOBSTATUS,\n       MU.JOBTYPE,\n       MU.MAPID,\n       MU.NAME,\n       MU.ORGANIZATIONCODE,\n       MU.SEX,\n       MU.SORT,\n       MU.STANDBYACCOUNT,\n       MU.STATION,\n       MU.STATIONGRADE,\n       MU.STATIONGRADESYSTEM,\n       MU.STATIONLEVEL,\n       MU.STATIONSEQUENCE,\n       MU.STATIONSYSTEM,\n       MU.TELEPHONE,\n       MU.TIME,\n       MU.USERSTATUS,\n       IF(LENGTH(TU.NAME_CARD_MOBILE) = 11, CONCAT(LEFT(TU.NAME_CARD_MOBILE, 3), '****',\n           RIGHT(TU.NAME_CARD_MOBILE, 4)), ''),\n       IF(length(TU.CERTIFICATE_CODE) = 18, CONCAT(substr(TU.CERTIFICATE_CODE, 1, 4), '**********',\n                                                   substr(TU.CERTIFICATE_CODE, 15, 4)\n                                            ), ''),\n       MD5(TU.CERTIFICATE_CODE),\n       IF(length(TU.CERTIFICATE_CODE) = 18, substr(TU.CERTIFICATE_CODE, 7, 4), ''),\n       IF(length(TU.CERTIFICATE_CODE) = 18, substr(TU.CERTIFICATE_CODE, 11, 2), ''),\n       IF(length(TU.CERTIFICATE_CODE) = 18, substr(TU.CERTIFICATE_CODE, 13, 2), ''),\n       IF(LENGTH(TU.CERTIFICATE_CODE) != 18, NULL, DATE_FORMAT(NOW(), '%Y') - substr(TU.CERTIFICATE_CODE, 7, 4)),\n       O.GLOBLE,\n       1,\n       '',\n       '',\n       TU.CERTIFICATE_TYPE,\n       NOW()\nFROM d_telecom_user TU\n         LEFT JOIN d_mss_user_mapping um\n                   on TU.ID = um.USERID\n         LEFT join d_mss_user MU\n                   on um.MSSUID = MU.HRCODE\n         LEFT JOIN mc_org_show O\n                   ON TU.ORG = O.ID",
  "describe": {
    "columns": [],
    "parameters": {
      "Right": 0
    },
    "nullable": []
  },
  "hash": "4a0d680af42c71eb8f9114aeff02b842131ffa310a72a529326d741730a5465e"
}
