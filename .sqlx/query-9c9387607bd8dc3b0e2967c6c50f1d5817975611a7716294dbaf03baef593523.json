{
  "db_name": "MySQL",
  "query": "-- name: get_archive_sc_list\n-- 获取四川人员培训档案信息\nSELECT distinct a.ID                                                        as _id,\n                a.ID                                                        AS id,\n                a.DATASTATE                                                 AS operation,\n                c.TRAINNAME                                                 AS training_name,\n                substring(c.TRAINBEGTIME, 1, 10)                            AS training_start_date,\n                substring(c.TRAINENDTIME, 1, 10)                            AS training_end_date,\n                tc.`NAME`                                                   AS training_category,\n                tm.`NAME`                                                   AS train_mode,\n                d.msshrcode                                                 AS sponsor_org_id,\n                d.msstype                                                   AS sponsor_org_type,\n                e.msshrcode                                                 AS sponsor_dept,\n                e.msstype                                                   AS sponsor_dept_type,\n                tpt.`NAME`                                                  AS training_place_type,\n                c.TRAINPURPOSE                                              AS train_purpose,\n                c.TRAINCONTENT                                              AS train_content,\n                c.UNDERTAKEORGNAME                                          as undertake_agent_name,\n                ''                                                          as assist_agent_name,\n                a.TRAINID                                                   AS training_id,\n                IF(a.studyassessscore = '无评价', '', a.studyassessscore)   AS study_assess_score,\n                IF(a.actionassessscore = '无评价', '', a.actionassessscore) AS action_assess_score,\n                IF(a.trainingtime = '', '0', a.trainingtime)                AS training_time,\n                a.cremark                                                   AS remark,\n                a.CERTIFICATEID                                             AS certificate_id,\n                a.certificatelevel                                          AS certificate_level,\n                a.certificatename                                           AS certificate_name,\n                a.grantdate                                                 AS grant_date,\n                a.DEPT                                                      AS dept,\n                a.deptcode                                                  AS dept_code,\n                a.depttype                                                  AS dept_type,\n                substring(a.GETCERTIFICATETIME, 1, 10)                      AS get_certificate_time,\n                u.MSS_HRCODE                                                AS user_id,\n                uo.msshrcode                                                AS user_org_id,\n                uo.msstype                                                  AS user_org_type,\n                u.MSS_JOBCATEGORY                                           AS job_category,\n                IF(A.ISCOMPLETE = '1', '通过', '未通过')                    as psn_archive_status\nFROM NU_TRAINUSERSOURCEDATA_SC_HYK a\n         LEFT JOIN NU_TRAINSOURCEDATA_SC_HYK c ON a.TRAINID = c.id\n         LEFT JOIN MC_ORG_SHOW d ON c.ORGANIZERID = d.id\n         left join mc_org_show e on c.SUPDEPTCODE = e.id\n         LEFT JOIN mc_user_ztk u ON a.USERID = u.id\n         left join mc_org_show uo on uo.id = u.org\n         left join fz_train_traincategory tc on tc.`CODE` = c.TRAINCATEGORY\n         left join fz_train_trainmode tm on tm.`CODE` = c.TRAINMODE\n         left join fz_train_traintype tt on tt.`CODE` = c.TRAINTYPE\n         left join fz_train_trainingplacetype tpt on tpt.`CODE` = c.ISDOMESTIC\nWHERE u.MSS_USERSTATUS = 1\n  AND (u.MSS_JOBTYPE = 1 or u.MSS_HRJOBTYPE = 1)\n  AND a.trainingtime > 0",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "_id",
        "type_info": {
          "type": "VarString",
          "flags": "MULTIPLE_KEY",
          "max_size": 2000
        }
      },
      {
        "ordinal": 1,
        "name": "id",
        "type_info": {
          "type": "VarString",
          "flags": "MULTIPLE_KEY",
          "max_size": 2000
        }
      },
      {
        "ordinal": 2,
        "name": "operation",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 3,
        "name": "training_name",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 400
        }
      },
      {
        "ordinal": 4,
        "name": "training_start_date",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 40
        }
      },
      {
        "ordinal": 5,
        "name": "training_end_date",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 40
        }
      },
      {
        "ordinal": 6,
        "name": "training_category",
        "type_info": {
          "type": "Blob",
          "flags": "BLOB",
          "max_size": 262140
        }
      },
      {
        "ordinal": 7,
        "name": "train_mode",
        "type_info": {
          "type": "Blob",
          "flags": "BLOB",
          "max_size": 262140
        }
      },
      {
        "ordinal": 8,
        "name": "sponsor_org_id",
        "type_info": {
          "type": "VarString",
          "flags": "MULTIPLE_KEY",
          "max_size": 200
        }
      },
      {
        "ordinal": 9,
        "name": "sponsor_org_type",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 400
        }
      },
      {
        "ordinal": 10,
        "name": "sponsor_dept",
        "type_info": {
          "type": "VarString",
          "flags": "MULTIPLE_KEY",
          "max_size": 200
        }
      },
      {
        "ordinal": 11,
        "name": "sponsor_dept_type",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 400
        }
      },
      {
        "ordinal": 12,
        "name": "training_place_type",
        "type_info": {
          "type": "Blob",
          "flags": "BLOB",
          "max_size": 262140
        }
      },
      {
        "ordinal": 13,
        "name": "train_purpose",
        "type_info": {
          "type": "Blob",
          "flags": "BLOB",
          "max_size": 4294967295
        }
      },
      {
        "ordinal": 14,
        "name": "train_content",
        "type_info": {
          "type": "Blob",
          "flags": "BLOB",
          "max_size": 4294967295
        }
      },
      {
        "ordinal": 15,
        "name": "undertake_agent_name",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 16,
        "name": "assist_agent_name",
        "type_info": {
          "type": "VarString",
          "flags": "NOT_NULL",
          "max_size": 0
        }
      },
      {
        "ordinal": 17,
        "name": "training_id",
        "type_info": {
          "type": "VarString",
          "flags": "MULTIPLE_KEY",
          "max_size": 2000
        }
      },
      {
        "ordinal": 18,
        "name": "study_assess_score",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 19,
        "name": "action_assess_score",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 20,
        "name": "training_time",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 21,
        "name": "remark",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 22,
        "name": "certificate_id",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 23,
        "name": "certificate_level",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 24,
        "name": "certificate_name",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 25,
        "name": "grant_date",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 26,
        "name": "dept",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 27,
        "name": "dept_code",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 28,
        "name": "dept_type",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 2000
        }
      },
      {
        "ordinal": 29,
        "name": "get_certificate_time",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 40
        }
      },
      {
        "ordinal": 30,
        "name": "user_id",
        "type_info": {
          "type": "VarString",
          "flags": "MULTIPLE_KEY",
          "max_size": 1020
        }
      },
      {
        "ordinal": 31,
        "name": "user_org_id",
        "type_info": {
          "type": "VarString",
          "flags": "MULTIPLE_KEY",
          "max_size": 200
        }
      },
      {
        "ordinal": 32,
        "name": "user_org_type",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 400
        }
      },
      {
        "ordinal": 33,
        "name": "job_category",
        "type_info": {
          "type": "VarString",
          "flags": "",
          "max_size": 1020
        }
      },
      {
        "ordinal": 34,
        "name": "psn_archive_status",
        "type_info": {
          "type": "VarString",
          "flags": "NOT_NULL",
          "max_size": 12
        }
      }
    ],
    "parameters": {
      "Right": 0
    },
    "nullable": [
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      false,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      false
    ]
  },
  "hash": "9c9387607bd8dc3b0e2967c6c50f1d5817975611a7716294dbaf03baef593523"
}
